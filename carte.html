<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Zone de chalandise ‚Äì L‚ÄôOrange Bleue</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
:root{
  --orange:#ff6a00;
  --gris:#f4f4f4;
}
body{margin:0;font-family:Arial,sans-serif;background:var(--gris)}
#topBar{
  position:fixed;top:0;width:100%;z-index:1001;
  background:white;padding:10px;display:flex;gap:10px;
  box-shadow:0 2px 6px rgba(0,0,0,.15)
}
#topBar strong{color:var(--orange)}
#search{flex:1;padding:8px;border:2px solid var(--orange);border-radius:5px}
#map{height:100vh;margin-top:55px}

#infoPanel{
  position:fixed;top:55px;right:-100%;
  width:45%;height:calc(100% - 55px);
  background:white;overflow-y:auto;
  box-shadow:-4px 0 10px rgba(0,0,0,.25);
  transition:.4s;padding:20px;z-index:1000
}
#infoPanel.active{right:0}
.closeBtn{float:right;cursor:pointer;font-size:22px}
h2{color:var(--orange);margin-top:0}
.card{background:#fafafa;padding:15px;border-radius:8px}
table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{border:1px solid #ddd;padding:8px}
th{background:var(--orange);color:white}

@media(max-width:768px){
  #infoPanel{width:100%;height:50%;bottom:-100%;top:auto;right:0}
  #infoPanel.active{bottom:0}
}
</style>
</head>

<body>

<div id="topBar">
  <strong>üèãÔ∏è Zone de chalandise ‚Äì L‚ÄôOrange Bleue</strong>
  <input id="search" placeholder="Rechercher une salle‚Ä¶" oninput="filterGyms()">
</div>

<div id="map"></div>

<div id="infoPanel">
  <span class="closeBtn" onclick="closePanel()">‚ùå</span>
  <div id="panelContent"></div>
</div>

<script>
// ================= ORANGE BLEUE =================
const orangeBleue = {lat:41.4305,lng:2.1840};

const map = L.map("map").setView([orangeBleue.lat,orangeBleue.lng],13);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{
  attribution:"¬© OpenStreetMap"
}).addTo(map);

L.marker([orangeBleue.lat,orangeBleue.lng],{
  icon:L.icon({
    iconUrl:"https://maps.gstatic.com/mapfiles/ms2/micons/orange.png",
    iconSize:[32,32],iconAnchor:[16,32]
  })
}).addTo(map).bindPopup("üèãÔ∏è L‚ÄôOrange Bleue");

L.circle([orangeBleue.lat,orangeBleue.lng],{
  radius:2000,color:"#ff6a00",fillColor:"#ff6a00",fillOpacity:0.15
}).addTo(map);

// ================= PANNEAU =================
const panel=document.getElementById("infoPanel");
const panelContent=document.getElementById("panelContent");
function openPanel(html,lat,lng){
  panelContent.innerHTML=html;
  panel.classList.add("active");
  map.setView([lat,lng],15);
}
function closePanel(){panel.classList.remove("active");}

// ================= SALLES =================
const gyms=[
{ name:"Club Esports Fabra Gym",lat:41.4335,lng:2.1831,
html:`<div class="card"><h2>Club Esports Fabra Gym</h2><table>
<tr><th>Formule</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>Mensuel</td><td>‚âà50‚Ç¨</td><td>Musculation & fitness</td><td>Variable</td></tr>
</table></div>`},

{ name:"Nick Spa & Sport Club",lat:41.4388,lng:2.1864,
html:`<div class="card"><h2>Nick Spa & Sport Club</h2><table>
<tr><th>Formule</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>Acc√®s libre</td><td>99,95‚Ç¨</td><td>Gym + Spa</td><td>Premium</td></tr>
</table></div>`},

{ name:"Gimn√†s Sport Club",lat:41.4269,lng:2.1795,
html:`<div class="card"><h2>Gimn√†s Sport Club</h2><table>
<tr><th>Formule</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>Mensuel</td><td>44‚Ç¨</td><td>Fitness</td><td>Standard</td></tr>
</table></div>`},

{ name:"Puro Impacto",lat:41.4298,lng:2.1762,
html:`<div class="card"><h2>Puro Impacto</h2><table>
<tr><th>Pack</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>Fitness</td><td>45‚Ç¨</td><td>Muscu</td><td>+matr√≠cula</td></tr>
<tr><td>Fight Club</td><td>79‚Ç¨</td><td>Sports combat</td><td>Boxe / MMA</td></tr>
</table></div>`},

{ name:"VivaGym Meridiana",lat:41.4354,lng:2.1881,
html:`<div class="card"><h2>VivaGym Meridiana</h2><table>
<tr><th>Plan</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>ONE</td><td>29,90‚Ç¨</td><td>Club local</td><td>Sans engagement</td></tr>
</table></div>`},

{ name:"VivaGym Peg√†s",lat:41.4317,lng:2.1916,
html:`<div class="card"><h2>VivaGym Peg√†s</h2><table>
<tr><th>Plan</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>ONE</td><td>29,90‚Ç¨</td><td>Gym</td><td>Basique</td></tr>
</table></div>`},

{ name:"Entrena-T 24h Sant Andreu",lat:41.4361,lng:2.1889,
html:`<div class="card"><h2>Entrena-T 24h</h2><table>
<tr><th>Formule</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>Mensuel</td><td>47,90‚Ç¨</td><td>24h/7j</td><td>Sans engagement</td></tr>
</table></div>`},

{ name:"Club Nataci√≥ Sant Andreu",lat:41.4359,lng:2.1853,
html:`<div class="card"><h2>Club Nataci√≥ Sant Andreu</h2><table>
<tr><th>Type</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>Mensuel</td><td>‚âà48‚Ç¨</td><td>Piscine + gym</td><td>Complet</td></tr>
</table></div>`},

{ name:"Cobosu Gym Station",lat:41.4282,lng:2.1813,
html:`<div class="card"><h2>Cobosu Gym Station</h2><p>Aucun tarif public ‚Äì sur demande</p></div>`},

{ name:"CEM Guinard√≥",lat:41.4188,lng:2.1734,
html:`<div class="card"><h2>CEM Guinard√≥</h2><table>
<tr><th>Quota</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>Adulte</td><td>55,85‚Ç¨</td><td>Piscine + fitness</td><td>Municipal</td></tr>
</table></div>`},

{ name:"DIR Alc√∫dia",lat:41.4381,lng:2.1820,
html:`<div class="card"><h2>DIR Alc√∫dia</h2><table>
<tr><th>Formule</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>Standard</td><td>‚âà45‚Ç¨</td><td>Complet</td><td>DIR</td></tr>
</table></div>`},

{ name:"DIR Maragall",lat:41.4219,lng:2.1730,
html:`<div class="card"><h2>DIR Maragall</h2><table>
<tr><th>Formule</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>Mensuel</td><td>‚âà48‚Ç¨</td><td>Complet</td><td>DIR</td></tr>
</table></div>`},

{ name:"Synergym Fabra i Puig",lat:41.4332,lng:2.1819,
html:`<div class="card"><h2>Synergym Fabra i Puig</h2><table>
<tr><th>Formule</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>Basic</td><td>‚âà22‚Ç¨</td><td>Gym</td><td>Low-cost</td></tr>
</table></div>`},

{ name:"Synergym Maragall",lat:41.4214,lng:2.1708,
html:`<div class="card"><h2>Synergym Maragall</h2><table>
<tr><th>Formule</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>Basic</td><td>‚âà23‚Ç¨</td><td>Gym</td><td>Low-cost</td></tr>
</table></div>`},

{ name:"CEM Cotxeres Borb√≥",lat:41.4290,lng:2.1745,
html:`<div class="card"><h2>CEM Cotxeres Borb√≥</h2><p>Tarifs sur place</p></div>`},

{ name:"Forus Can Drag√≥",lat:41.4323,lng:2.1701,
html:`<div class="card"><h2>Forus Can Drag√≥</h2><table>
<tr><th>Formule</th><th>Prix</th><th>Acc√®s</th><th>Remarques</th></tr>
<tr><td>PLUS</td><td>‚âà68‚Ç¨</td><td>Piscine + spa</td><td>Premium</td></tr>
</table></div>`}
];

// ================= MARQUEURS =================
const markers=[];
gyms.forEach(g=>{
  const m=L.marker([g.lat,g.lng]).addTo(map)
   .bindPopup(g.name)
   .on("click",()=>openPanel(g.html,g.lat,g.lng));
  markers.push(m);
});

// ================= RECHERCHE =================
function filterGyms(){
  const q=document.getElementById("search").value.toLowerCase();
  markers.forEach((m,i)=>{
    if(gyms[i].name.toLowerCase().includes(q)){m.addTo(map);}
    else{map.removeLayer(m);}
  });
}
</script>

</body>
</html>
